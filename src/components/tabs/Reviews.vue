<template>
    <div v-if="!reviews" class="no-data">
        No comments
    </div>
    <div v-else class="review">

        <article>
            <h6 class="mb0"><strong>Customer Reviews</strong></h6>
            <ul class="review-list">
                <li v-for="review in reviews" :key="review.id">
                    <div class="review-heading">
                        <div class="img-wrapper">
                            <img src="../../assets/images/avatar-small.png" alt="">
                        </div>
                        <div class="user-info">
                            <p class="mb0">{{review.user.username}}</p>
                            <!-- <RatingStars/> -->
                        </div>
                    </div>
                    <div class="review-body">
                        <!-- <p class="mb0"><strong></strong></p> -->
                        <p>{{review.body}}</p>
                    </div>
                    <div class="review-footer">
                        <small>Review by <span>Melta</span> Posted on <span>July 20, 2023</span></small>
                    </div>
                </li>
            </ul>
            <Pagination v-if="params" :pageParams="params" :limit="parseInt(params?.limit) || 10" :pageNumb="1" @setPage="getReviews"/>
        </article>
        <article class="add-review">
            <h6><strong>Add your Review</strong></h6>
            <p class="mb-">Your Rating</p>

            <div class="o-flex o-flex--center your-rating">
                <a href="javascript:;" class="rating-trigger">
                    <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M8.36051 2.72601C9.03109 1.31334 10.9686 1.31333 11.6392 2.72601L12.7981 5.16749C13.0644 5.72846 13.5791 6.11728 14.1745 6.20724L16.766 6.59875C18.2654 6.82528 18.8641 8.74112 17.7791 9.84074L15.9039 11.7412C15.4731 12.1778 15.2765 12.807 15.3782 13.4235L15.8208 16.107C16.077 17.6596 14.5095 18.8437 13.1684 18.1106L10.8505 16.8437C10.318 16.5526 9.68172 16.5526 9.14915 16.8437L6.83131 18.1106C5.49016 18.8437 3.92269 17.6596 4.17883 16.107L4.62149 13.4235C4.72321 12.807 4.5266 12.1778 4.09574 11.7412L2.22057 9.84074C1.13556 8.74113 1.73428 6.82528 3.23372 6.59875L5.82515 6.20724C6.42058 6.11728 6.93531 5.72846 7.20159 5.16749L8.36051 2.72601Z" stroke="#141C1D" stroke-opacity="0.8" stroke-linejoin="round"/>
                    </svg> 
                </a>
                <span></span>
                <a href="javascript:;" class="rating-trigger">
                    <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M8.36051 2.72601C9.03109 1.31334 10.9686 1.31333 11.6392 2.72601L12.7981 5.16749C13.0644 5.72846 13.5791 6.11728 14.1745 6.20724L16.766 6.59875C18.2654 6.82528 18.8641 8.74112 17.7791 9.84074L15.9039 11.7412C15.4731 12.1778 15.2765 12.807 15.3782 13.4235L15.8208 16.107C16.077 17.6596 14.5095 18.8437 13.1684 18.1106L10.8505 16.8437C10.318 16.5526 9.68172 16.5526 9.14915 16.8437L6.83131 18.1106C5.49016 18.8437 3.92269 17.6596 4.17883 16.107L4.62149 13.4235C4.72321 12.807 4.5266 12.1778 4.09574 11.7412L2.22057 9.84074C1.13556 8.74113 1.73428 6.82528 3.23372 6.59875L5.82515 6.20724C6.42058 6.11728 6.93531 5.72846 7.20159 5.16749L8.36051 2.72601Z" stroke="#141C1D" stroke-opacity="0.8" stroke-linejoin="round"/>
                    </svg> 
                    <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M8.36051 2.72601C9.03109 1.31334 10.9686 1.31333 11.6392 2.72601L12.7981 5.16749C13.0644 5.72846 13.5791 6.11728 14.1745 6.20724L16.766 6.59875C18.2654 6.82528 18.8641 8.74112 17.7791 9.84074L15.9039 11.7412C15.4731 12.1778 15.2765 12.807 15.3782 13.4235L15.8208 16.107C16.077 17.6596 14.5095 18.8437 13.1684 18.1106L10.8505 16.8437C10.318 16.5526 9.68172 16.5526 9.14915 16.8437L6.83131 18.1106C5.49016 18.8437 3.92269 17.6596 4.17883 16.107L4.62149 13.4235C4.72321 12.807 4.5266 12.1778 4.09574 11.7412L2.22057 9.84074C1.13556 8.74113 1.73428 6.82528 3.23372 6.59875L5.82515 6.20724C6.42058 6.11728 6.93531 5.72846 7.20159 5.16749L8.36051 2.72601Z" stroke="#141C1D" stroke-opacity="0.8" stroke-linejoin="round"/>
                    </svg> 
                </a>
                <span></span>
                <a href="javascript:;" class="rating-trigger">
                    <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M8.36051 2.72601C9.03109 1.31334 10.9686 1.31333 11.6392 2.72601L12.7981 5.16749C13.0644 5.72846 13.5791 6.11728 14.1745 6.20724L16.766 6.59875C18.2654 6.82528 18.8641 8.74112 17.7791 9.84074L15.9039 11.7412C15.4731 12.1778 15.2765 12.807 15.3782 13.4235L15.8208 16.107C16.077 17.6596 14.5095 18.8437 13.1684 18.1106L10.8505 16.8437C10.318 16.5526 9.68172 16.5526 9.14915 16.8437L6.83131 18.1106C5.49016 18.8437 3.92269 17.6596 4.17883 16.107L4.62149 13.4235C4.72321 12.807 4.5266 12.1778 4.09574 11.7412L2.22057 9.84074C1.13556 8.74113 1.73428 6.82528 3.23372 6.59875L5.82515 6.20724C6.42058 6.11728 6.93531 5.72846 7.20159 5.16749L8.36051 2.72601Z" stroke="#141C1D" stroke-opacity="0.8" stroke-linejoin="round"/>
                    </svg> 
                    <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M8.36051 2.72601C9.03109 1.31334 10.9686 1.31333 11.6392 2.72601L12.7981 5.16749C13.0644 5.72846 13.5791 6.11728 14.1745 6.20724L16.766 6.59875C18.2654 6.82528 18.8641 8.74112 17.7791 9.84074L15.9039 11.7412C15.4731 12.1778 15.2765 12.807 15.3782 13.4235L15.8208 16.107C16.077 17.6596 14.5095 18.8437 13.1684 18.1106L10.8505 16.8437C10.318 16.5526 9.68172 16.5526 9.14915 16.8437L6.83131 18.1106C5.49016 18.8437 3.92269 17.6596 4.17883 16.107L4.62149 13.4235C4.72321 12.807 4.5266 12.1778 4.09574 11.7412L2.22057 9.84074C1.13556 8.74113 1.73428 6.82528 3.23372 6.59875L5.82515 6.20724C6.42058 6.11728 6.93531 5.72846 7.20159 5.16749L8.36051 2.72601Z" stroke="#141C1D" stroke-opacity="0.8" stroke-linejoin="round"/>
                    </svg> 
                    <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M8.36051 2.72601C9.03109 1.31334 10.9686 1.31333 11.6392 2.72601L12.7981 5.16749C13.0644 5.72846 13.5791 6.11728 14.1745 6.20724L16.766 6.59875C18.2654 6.82528 18.8641 8.74112 17.7791 9.84074L15.9039 11.7412C15.4731 12.1778 15.2765 12.807 15.3782 13.4235L15.8208 16.107C16.077 17.6596 14.5095 18.8437 13.1684 18.1106L10.8505 16.8437C10.318 16.5526 9.68172 16.5526 9.14915 16.8437L6.83131 18.1106C5.49016 18.8437 3.92269 17.6596 4.17883 16.107L4.62149 13.4235C4.72321 12.807 4.5266 12.1778 4.09574 11.7412L2.22057 9.84074C1.13556 8.74113 1.73428 6.82528 3.23372 6.59875L5.82515 6.20724C6.42058 6.11728 6.93531 5.72846 7.20159 5.16749L8.36051 2.72601Z" stroke="#141C1D" stroke-opacity="0.8" stroke-linejoin="round"/>
                    </svg> 
                </a>
                <span></span>
                <a href="javascript:;" class="rating-trigger">
                    <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M8.36051 2.72601C9.03109 1.31334 10.9686 1.31333 11.6392 2.72601L12.7981 5.16749C13.0644 5.72846 13.5791 6.11728 14.1745 6.20724L16.766 6.59875C18.2654 6.82528 18.8641 8.74112 17.7791 9.84074L15.9039 11.7412C15.4731 12.1778 15.2765 12.807 15.3782 13.4235L15.8208 16.107C16.077 17.6596 14.5095 18.8437 13.1684 18.1106L10.8505 16.8437C10.318 16.5526 9.68172 16.5526 9.14915 16.8437L6.83131 18.1106C5.49016 18.8437 3.92269 17.6596 4.17883 16.107L4.62149 13.4235C4.72321 12.807 4.5266 12.1778 4.09574 11.7412L2.22057 9.84074C1.13556 8.74113 1.73428 6.82528 3.23372 6.59875L5.82515 6.20724C6.42058 6.11728 6.93531 5.72846 7.20159 5.16749L8.36051 2.72601Z" stroke="#141C1D" stroke-opacity="0.8" stroke-linejoin="round"/>
                    </svg> 
                    <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M8.36051 2.72601C9.03109 1.31334 10.9686 1.31333 11.6392 2.72601L12.7981 5.16749C13.0644 5.72846 13.5791 6.11728 14.1745 6.20724L16.766 6.59875C18.2654 6.82528 18.8641 8.74112 17.7791 9.84074L15.9039 11.7412C15.4731 12.1778 15.2765 12.807 15.3782 13.4235L15.8208 16.107C16.077 17.6596 14.5095 18.8437 13.1684 18.1106L10.8505 16.8437C10.318 16.5526 9.68172 16.5526 9.14915 16.8437L6.83131 18.1106C5.49016 18.8437 3.92269 17.6596 4.17883 16.107L4.62149 13.4235C4.72321 12.807 4.5266 12.1778 4.09574 11.7412L2.22057 9.84074C1.13556 8.74113 1.73428 6.82528 3.23372 6.59875L5.82515 6.20724C6.42058 6.11728 6.93531 5.72846 7.20159 5.16749L8.36051 2.72601Z" stroke="#141C1D" stroke-opacity="0.8" stroke-linejoin="round"/>
                    </svg> 
                    <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M8.36051 2.72601C9.03109 1.31334 10.9686 1.31333 11.6392 2.72601L12.7981 5.16749C13.0644 5.72846 13.5791 6.11728 14.1745 6.20724L16.766 6.59875C18.2654 6.82528 18.8641 8.74112 17.7791 9.84074L15.9039 11.7412C15.4731 12.1778 15.2765 12.807 15.3782 13.4235L15.8208 16.107C16.077 17.6596 14.5095 18.8437 13.1684 18.1106L10.8505 16.8437C10.318 16.5526 9.68172 16.5526 9.14915 16.8437L6.83131 18.1106C5.49016 18.8437 3.92269 17.6596 4.17883 16.107L4.62149 13.4235C4.72321 12.807 4.5266 12.1778 4.09574 11.7412L2.22057 9.84074C1.13556 8.74113 1.73428 6.82528 3.23372 6.59875L5.82515 6.20724C6.42058 6.11728 6.93531 5.72846 7.20159 5.16749L8.36051 2.72601Z" stroke="#141C1D" stroke-opacity="0.8" stroke-linejoin="round"/>
                    </svg> 
                    <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M8.36051 2.72601C9.03109 1.31334 10.9686 1.31333 11.6392 2.72601L12.7981 5.16749C13.0644 5.72846 13.5791 6.11728 14.1745 6.20724L16.766 6.59875C18.2654 6.82528 18.8641 8.74112 17.7791 9.84074L15.9039 11.7412C15.4731 12.1778 15.2765 12.807 15.3782 13.4235L15.8208 16.107C16.077 17.6596 14.5095 18.8437 13.1684 18.1106L10.8505 16.8437C10.318 16.5526 9.68172 16.5526 9.14915 16.8437L6.83131 18.1106C5.49016 18.8437 3.92269 17.6596 4.17883 16.107L4.62149 13.4235C4.72321 12.807 4.5266 12.1778 4.09574 11.7412L2.22057 9.84074C1.13556 8.74113 1.73428 6.82528 3.23372 6.59875L5.82515 6.20724C6.42058 6.11728 6.93531 5.72846 7.20159 5.16749L8.36051 2.72601Z" stroke="#141C1D" stroke-opacity="0.8" stroke-linejoin="round"/>
                    </svg> 
                </a>
                <span></span>
                <a href="javascript:;" class="rating-trigger">
                    <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M8.36051 2.72601C9.03109 1.31334 10.9686 1.31333 11.6392 2.72601L12.7981 5.16749C13.0644 5.72846 13.5791 6.11728 14.1745 6.20724L16.766 6.59875C18.2654 6.82528 18.8641 8.74112 17.7791 9.84074L15.9039 11.7412C15.4731 12.1778 15.2765 12.807 15.3782 13.4235L15.8208 16.107C16.077 17.6596 14.5095 18.8437 13.1684 18.1106L10.8505 16.8437C10.318 16.5526 9.68172 16.5526 9.14915 16.8437L6.83131 18.1106C5.49016 18.8437 3.92269 17.6596 4.17883 16.107L4.62149 13.4235C4.72321 12.807 4.5266 12.1778 4.09574 11.7412L2.22057 9.84074C1.13556 8.74113 1.73428 6.82528 3.23372 6.59875L5.82515 6.20724C6.42058 6.11728 6.93531 5.72846 7.20159 5.16749L8.36051 2.72601Z" stroke="#141C1D" stroke-opacity="0.8" stroke-linejoin="round"/>
                    </svg> 
                    <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M8.36051 2.72601C9.03109 1.31334 10.9686 1.31333 11.6392 2.72601L12.7981 5.16749C13.0644 5.72846 13.5791 6.11728 14.1745 6.20724L16.766 6.59875C18.2654 6.82528 18.8641 8.74112 17.7791 9.84074L15.9039 11.7412C15.4731 12.1778 15.2765 12.807 15.3782 13.4235L15.8208 16.107C16.077 17.6596 14.5095 18.8437 13.1684 18.1106L10.8505 16.8437C10.318 16.5526 9.68172 16.5526 9.14915 16.8437L6.83131 18.1106C5.49016 18.8437 3.92269 17.6596 4.17883 16.107L4.62149 13.4235C4.72321 12.807 4.5266 12.1778 4.09574 11.7412L2.22057 9.84074C1.13556 8.74113 1.73428 6.82528 3.23372 6.59875L5.82515 6.20724C6.42058 6.11728 6.93531 5.72846 7.20159 5.16749L8.36051 2.72601Z" stroke="#141C1D" stroke-opacity="0.8" stroke-linejoin="round"/>
                    </svg> 
                    <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M8.36051 2.72601C9.03109 1.31334 10.9686 1.31333 11.6392 2.72601L12.7981 5.16749C13.0644 5.72846 13.5791 6.11728 14.1745 6.20724L16.766 6.59875C18.2654 6.82528 18.8641 8.74112 17.7791 9.84074L15.9039 11.7412C15.4731 12.1778 15.2765 12.807 15.3782 13.4235L15.8208 16.107C16.077 17.6596 14.5095 18.8437 13.1684 18.1106L10.8505 16.8437C10.318 16.5526 9.68172 16.5526 9.14915 16.8437L6.83131 18.1106C5.49016 18.8437 3.92269 17.6596 4.17883 16.107L4.62149 13.4235C4.72321 12.807 4.5266 12.1778 4.09574 11.7412L2.22057 9.84074C1.13556 8.74113 1.73428 6.82528 3.23372 6.59875L5.82515 6.20724C6.42058 6.11728 6.93531 5.72846 7.20159 5.16749L8.36051 2.72601Z" stroke="#141C1D" stroke-opacity="0.8" stroke-linejoin="round"/>
                    </svg> 
                    <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M8.36051 2.72601C9.03109 1.31334 10.9686 1.31333 11.6392 2.72601L12.7981 5.16749C13.0644 5.72846 13.5791 6.11728 14.1745 6.20724L16.766 6.59875C18.2654 6.82528 18.8641 8.74112 17.7791 9.84074L15.9039 11.7412C15.4731 12.1778 15.2765 12.807 15.3782 13.4235L15.8208 16.107C16.077 17.6596 14.5095 18.8437 13.1684 18.1106L10.8505 16.8437C10.318 16.5526 9.68172 16.5526 9.14915 16.8437L6.83131 18.1106C5.49016 18.8437 3.92269 17.6596 4.17883 16.107L4.62149 13.4235C4.72321 12.807 4.5266 12.1778 4.09574 11.7412L2.22057 9.84074C1.13556 8.74113 1.73428 6.82528 3.23372 6.59875L5.82515 6.20724C6.42058 6.11728 6.93531 5.72846 7.20159 5.16749L8.36051 2.72601Z" stroke="#141C1D" stroke-opacity="0.8" stroke-linejoin="round"/>
                    </svg> 
                    <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M8.36051 2.72601C9.03109 1.31334 10.9686 1.31333 11.6392 2.72601L12.7981 5.16749C13.0644 5.72846 13.5791 6.11728 14.1745 6.20724L16.766 6.59875C18.2654 6.82528 18.8641 8.74112 17.7791 9.84074L15.9039 11.7412C15.4731 12.1778 15.2765 12.807 15.3782 13.4235L15.8208 16.107C16.077 17.6596 14.5095 18.8437 13.1684 18.1106L10.8505 16.8437C10.318 16.5526 9.68172 16.5526 9.14915 16.8437L6.83131 18.1106C5.49016 18.8437 3.92269 17.6596 4.17883 16.107L4.62149 13.4235C4.72321 12.807 4.5266 12.1778 4.09574 11.7412L2.22057 9.84074C1.13556 8.74113 1.73428 6.82528 3.23372 6.59875L5.82515 6.20724C6.42058 6.11728 6.93531 5.72846 7.20159 5.16749L8.36051 2.72601Z" stroke="#141C1D" stroke-opacity="0.8" stroke-linejoin="round"/>
                    </svg> 
                </a>
            </div>
            <form action="">
                <div class="input-box">
                    <p>Name</p>
                    <input type="text" class="input input--primary" placeholder="Enter Your Name">
                </div>
                <div class="input-box">
                    <p>Email Address</p>
                    <input type="text" class="input input--primary" placeholder="Enter Your Email">
                </div>
                <div class="input-box">
                    <p>Your Review</p>
                    <textarea name="" id="" class="input input--primary input--textarea" placeholder="Enter Your Review"></textarea>
                </div>
                <button class="button button--primary">Submit</button>
            </form>
        </article>
    </div>
</template>
<script>
import RatingStars from "../RatingStars.vue"
import Pagination from "../Pagination.vue"
import { reviews } from "@/api/reviews"
import toastr from "toastr";

export default {
    name: "Reviews",
    components: {RatingStars,Pagination},
    data() {
        return {
            reviews: null,
            params: null,
            skipComments: 10,
            limitNumberComments: 10,
        }
    },
    methods: {
        getAllComments(i) {
            console.log(i)
        },
        async getReviews(page = 1) {
            try {
                const {data: {comments, ...rest}} = await reviews({skip: page * (this.skipComments || 0) , limit: 8});
                this.params = rest
                this.reviews = comments;
            }catch (e) {
                console.log(e)
                toastr.error(e.response.data.message);
            }
        },
    },
    mounted() {
        this.getReviews()
    }
}
</script>
<style lang="scss" scoped>
    .review {
        display: flex;
        gap: 30px;

        article {
            flex: 1;
        }
    }

    .review-list {
        margin-bottom: 50px;

        >li {
            border-bottom: 1px solid rgba(163, 170, 171, 0.20);
            padding-top: 16px;
            padding-bottom: 16px;
        }
    }

    .review-heading {
        display: flex;
        align-items: center;
        gap: 10px;
        margin-bottom: 10px;
        
        .img-wrapper {
            width: 50px;
            height: 50px; 
            border-radius: 50%;
            object-fit: cover;
            overflow: hidden;
        }

        img {
            width: 50px;
        }
    }

    .review-body {
        margin-bottom: 10px;
    }

    .review-footer {
        small {
            font-size: 14px;
            color: #141C1D;

            span {
                color: #A3AAAB;
            }
        }
    }

    .your-rating {
        gap: 10px;
        margin-bottom: 30px;

        span {
            width: 1px;
            height: 20px; 
            background-color: rgba(163, 170, 171, 0.20);
        }
    }

    .rating-trigger {
        display: flex;
        align-items: center;
    }
</style>